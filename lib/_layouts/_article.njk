{% extends "_base.njk" %}

{% from "appArticle/macro.njk" import appArticle %}
{% from "appCard/macro.njk" import appCard with context %}
{% from "prose/macro.njk" import appProse %}

{% block header %}
  {{ appArticleHeader({
    containerClasses: "nhsuk-width-container-fluid"
  }) }}
{% endblock %}

{% block content %}
  {% call appArticle({
    header: {
      title: title | widont
    },
    footer: {
      date: page.date,
      modified: modified if modified
    }
  }) %}
    <div class="nhsbsa-sticky-nav">
      <h2 class="nhsbsa-sticky-nav__heading">Contents</h2>
      {{ content | toc | safe }}
    </div>

    <div class="nhsbsa-article-content">
      <h1 class="nhsuk-heading-xl">
        {{ title }}
      </h1>
      
      {% call appProse({
        prose: content
      }) -%}
      {% if related %}
      <h2 class="nhsuk-heading-l">
        {{ related.title or "Related articles" }}
      </h2>
      {{ appCard({
        items: collections[related.tag],
        order: related.tag
      }) }}
      {% endif %}
      {%- endcall %}
    </div>
  {% endcall %}
{% endblock %}
